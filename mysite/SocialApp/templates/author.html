{% extends "base.html" %}

{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/homepage.css' %}">
<style>
    body{
        background-image: url("{% static 'wallpaper5.jpg' %}");
    }
</style>
{% endblock %}

{% block content %}
    <!--For each post, display the author and content-->
    <!--redirect to edit/delete/or to add comment, (we'll have to find a better way to do this)-->
    <div class="posts">
        <h1>All Posts</h1> <br/>
        <ul>
            {% for post in object_list %}
                {% if post.visibility == "PUBLIC" %}
                    <li class=posti><br><a class="postTitle" href="{% url 'post-details' post.pk%}">{{ post.title }}</a> 
                        <!--if the current auhtor whose logged in owns this post then they can edit/delete-->
                        {% if user.id == post.author.id %}
                            - <a href="{% url 'update_post' post.pk%}">Edit</a>
                            - <a href="{% url 'delete_post' post.pk%}">Delete Post</a>
                        {% endif %}
                        <br> By: {{ post.author}} - <small>{{ post.published}}</small>
                        <!--post content and description-->
                        <br><p class='postDescription'>{{ post.description }}</p>
                        <!--LIKES pass in url that sends a post id argument and updates the database-->
                        <form action="{% url 'like' post.pk %}" method="POST">
                            {% csrf_token %}
                            {{ form.as_p }}
                            
                            {% load app_filters %}
                            <input class="likeButton" type="submit" value='{{ post.pk|liked_or_not:user }} {{ post.likes.all|length }}'>
                        </form>
                    </li>
                    <br>
                    <br>
            {% endif %}
            {% endfor %}
        </ul>
    </div>
{% endblock %}